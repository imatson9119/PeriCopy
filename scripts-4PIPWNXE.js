"use strict";var _typeof=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o};//! annyang
//! version : 2.6.1
//! author  : Tal Ater @TalAter
//! license : MIT
//! https://www.TalAter.com/annyang/
//! annyang
//! version : 2.6.1
//! author  : Tal Ater @TalAter
//! license : MIT
//! https://www.TalAter.com/annyang/
(function(o,c){typeof define=="function"&&define.amd?define([],function(){return o.annyang=c(o)}):(typeof module>"u"?"undefined":_typeof(module))==="object"&&module.exports?module.exports=c(o):o.annyang=c(o)})(typeof window<"u"?window:void 0,function(o,c){var p,k=o.SpeechRecognition||o.webkitSpeechRecognition||o.mozSpeechRecognition||o.msSpeechRecognition||o.oSpeechRecognition;if(!k)return null;var a,y,d=[],i={start:[],error:[],end:[],soundstart:[],result:[],resultMatch:[],resultNoMatch:[],errorNetwork:[],errorPermissionBlocked:[],errorPermissionDenied:[]},v=0,x=0,f=!1,h="font-weight: bold; color: #00f;",m=!1,b=!1,D=/\s*\((.*?)\)\s*/g,$=/(\(\?:[^)]+\))\?/g,E=/(\(\?)?:\w+/g,M=/\*\w+/g,N=/[\-{}\[\]+?.,\\\^$|#]/g,l=function(n){for(var e=arguments.length,t=Array(1<e?e-1:0),r=1;r<e;r++)t[r-1]=arguments[r];n.forEach(function(s){s.callback.apply(s.context,t)})},R=function(){return a!==c},g=function(n,e){n.indexOf("%c")!==-1||e?console.log(n,e||h):console.log(n)},w=function(){R()||p.init({},!1)},P=function(n,e,t){d.push({command:n,callback:e,originalPhrase:t}),f&&g("Command successfully loaded: %c"+t,h)},C=function(n){var e;l(i.result,n);for(var t=0;t<n.length;t++){e=n[t].trim(),f&&g("Speech recognized: %c"+e,h);for(var r=0,s=d.length;r<s;r++){var u=d[r],A=u.command.exec(e);if(A){var S=A.slice(1);return f&&(g("command matched: %c"+u.originalPhrase,h),S.length&&g("with parameters",S)),u.callback.apply(this,S),void l(i.resultMatch,e,u.originalPhrase,n)}}}l(i.resultNoMatch,n)};return p={init:function(n){var e=!(1<arguments.length&&arguments[1]!==c)||arguments[1];a&&a.abort&&a.abort(),(a=new k).maxAlternatives=5,a.continuous=o.location.protocol==="http:",a.lang="en-US",a.onstart=function(){b=!0,l(i.start)},a.onsoundstart=function(){l(i.soundstart)},a.onerror=function(t){switch(l(i.error,t),t.error){case"network":l(i.errorNetwork,t);break;case"not-allowed":case"service-not-allowed":y=!1,new Date().getTime()-v<200?l(i.errorPermissionBlocked,t):l(i.errorPermissionDenied,t)}},a.onend=function(){if(b=!1,l(i.end),y){var t=new Date().getTime()-v;(x+=1)%10==0&&f&&g("Speech Recognition is repeatedly stopping and starting. See http://is.gd/annyang_restarts for tips."),t<1e3?setTimeout(function(){p.start({paused:m})},1e3-t):p.start({paused:m})}},a.onresult=function(t){if(m)return f&&g("Speech heard, but annyang is paused"),!1;for(var r=t.results[t.resultIndex],s=[],u=0;u<r.length;u++)s[u]=r[u].transcript;C(s)},e&&(d=[]),n.length&&this.addCommands(n)},start:function(n){w(),m=(n=n||{}).paused!==c&&!!n.paused,y=n.autoRestart===c||!!n.autoRestart,n.continuous!==c&&(a.continuous=!!n.continuous),v=new Date().getTime();try{a.start()}catch(e){f&&g(e.message)}},abort:function(){y=!1,x=0,R()&&a.abort()},pause:function(){m=!0},resume:function(){p.start()},debug:function(){var n=!(0<arguments.length&&arguments[0]!==c)||arguments[0];f=!!n},setLanguage:function(n){w(),a.lang=n},addCommands:function(n){var e,t;for(var r in w(),n)if(n.hasOwnProperty(r))if(typeof(e=o[n[r]]||n[r])=="function")P((t=(t=r).replace(N,"\\$&").replace(D,"(?:$1)?").replace(E,function(s,u){return u?s:"([^\\s]+)"}).replace(M,"(.*?)").replace($,"\\s*$1?\\s*"),new RegExp("^"+t+"$","i")),e,r);else{if(!((e===void 0?"undefined":_typeof(e))==="object"&&e.regexp instanceof RegExp)){f&&g("Can not register command: %c"+r,h);continue}P(new RegExp(e.regexp.source,"i"),e.callback,r)}},removeCommands:function(n){n===c?d=[]:(n=Array.isArray(n)?n:[n],d=d.filter(function(e){for(var t=0;t<n.length;t++)if(n[t]===e.originalPhrase)return!1;return!0}))},addCallback:function(n,e,t){var r=o[e]||e;typeof r=="function"&&i[n]!==c&&i[n].push({callback:r,context:t||this})},removeCallback:function(n,e){var t=function(s){return s.callback!==e};for(var r in i)i.hasOwnProperty(r)&&(n!==c&&n!==r||(i[r]=e===c?[]:i[r].filter(t)))},isListening:function(){return b&&!m},getSpeechRecognizer:function(){return a},trigger:function(n){p.isListening()?(Array.isArray(n)||(n=[n]),C(n)):f&&g(b?"Speech heard, but annyang is paused":"Cannot trigger while annyang is aborted")}}});
